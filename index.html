<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Delitto in Villa</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #eee;
    padding: 20px;
  }
  #chat {
    border: 1px solid #444;
    min-height: 300px;
    padding: 10px;
    margin-bottom: 10px;
    background: #1c1c1c;
    overflow-y: auto;
  }
  .me { color: #7dd; }
  .bot { color: #f7a; }
  input, button {
    font-size: 16px;
  }
</style>
</head>

<body>

<h2>üïµÔ∏è‚Äç‚ôÇÔ∏è Delitto in Villa</h2>

<div id="chat"></div>

<input id="input" type="text" placeholder="Fai una domanda..." size="50">
<button onclick="send()">Invia</button>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");

// >>> METTI QUI IL TUO DOMINIO VERCEL <<<
const API_URL = "https://delitto2.vercel.app/";

function append(who, text) {
  const div = document.createElement("div");
  div.className = who;
  div.textContent = (who === "me" ? "Tu: " : "Sospettato: ") + text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function send() {
  const text = input.value.trim();
  if (!text) return;

  input.value = "";
  append("me", text);

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text })
    });

    const data = await res.json();

    if (data.reply) {
      append("bot", data.reply);
    } else {
      append("bot", "Errore: risposta non valida");
    }
  } catch (err) {
    append("bot", "Errore di rete");
  }
}
</script>

</body>
</html>
